<mxfile host="app.diagrams.net" modified="2025-09-09T00:00:00.000Z" agent="Mozilla/5.0" version="24.7.9" editor="diagramly" type="device">
  <diagram id="arch1" name="System Architecture">
    <mxGraphModel dx="1800" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="2550" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- User -->
        <mxCell id="u1" value="User" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;fontColor=#0D47A1;strokeWidth=1.5;" vertex="1" parent="1">
          <mxGeometry x="120" y="430" width="140" height="60" as="geometry"/>
        </mxCell>

        <!-- Interface: Editor -->
        <mxCell id="ed1" value="Editor (JointJS)&#10;Tree state" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;fontColor=#1B5E20;strokeWidth=1.5;" vertex="1" parent="1">
          <mxGeometry x="360" y="320" width="240" height="80" as="geometry"/>
        </mxCell>

        <!-- Interface: Side Panel UI -->
        <mxCell id="ui1" value="Side Panel UI&#10;Suggest / Review / Explain" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;fontColor=#1B5E20;strokeWidth=1.5;" vertex="1" parent="1">
          <mxGeometry x="360" y="470" width="240" height="90" as="geometry"/>
        </mxCell>

        <!-- Modules container -->
        <mxCell id="modBox" value="Modules" style="swimlane=1;rounded=1;html=1;horizontal=0;startSize=28;fillColor=#F3E5F5;strokeColor=#6A1B9A;fontColor=#4A148C;strokeWidth=1.5;" vertex="1" parent="1">
          <mxGeometry x="720" y="260" width="520" height="360" as="geometry"/>
        </mxCell>

        <!-- Module: Augmentation -->
        <mxCell id="mAug" value="Augmentation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D1C4E9;strokeColor=#5E35B1;fontColor=#311B92;strokeWidth=1.2;" vertex="1" parent="modBox">
          <mxGeometry x="30" y="60" width="460" height="80" as="geometry"/>
        </mxCell>

        <!-- Module: Pruning -->
        <mxCell id="mPrune" value="Pruning" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D1C4E9;strokeColor=#5E35B1;fontColor=#311B92;strokeWidth=1.2;" vertex="1" parent="modBox">
          <mxGeometry x="30" y="160" width="460" height="80" as="geometry"/>
        </mxCell>

        <!-- Module: Communication -->
        <mxCell id="mComm" value="Communication" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D1C4E9;strokeColor=#5E35B1;fontColor=#311B92;strokeWidth=1.2;" vertex="1" parent="modBox">
          <mxGeometry x="30" y="260" width="460" height="80" as="geometry"/>
        </mxCell>

        <!-- External: Knowledge Base -->
        <mxCell id="kb1" value="Knowledge Base&#10;(attack_patterns.json + aliases)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ECEFF1;strokeColor=#455A64;fontColor=#263238;strokeWidth=1.2;" vertex="1" parent="1">
          <mxGeometry x="740" y="660" width="240" height="90" as="geometry"/>
        </mxCell>

        <!-- External: Configuration -->
        <mxCell id="cfg1" value="Configuration&#10;(config.json thresholds)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ECEFF1;strokeColor=#455A64;fontColor=#263238;strokeWidth=1.2;" vertex="1" parent="1">
          <mxGeometry x="1000" y="660" width="240" height="90" as="geometry"/>
        </mxCell>

        <!-- External: JSONL Log -->
        <mxCell id="log1" value="JSONL Log&#10;(suggest / review / explain events)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ECEFF1;strokeColor=#455A64;fontColor=#263238;strokeWidth=1.2;" vertex="1" parent="1">
          <mxGeometry x="1260" y="660" width="240" height="90" as="geometry"/>
        </mxCell>

        <!-- External: Semantic layer (optional) -->
        <mxCell id="sem1" value="Semantic layer (optional)&#10;TensorFlow.js USE" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#EF6C00;fontColor=#E65100;strokeWidth=1.2;" vertex="1" parent="1">
          <mxGeometry x="1280" y="360" width="260" height="120" as="geometry"/>
        </mxCell>

        <!-- Edges: User to Interface -->
        <mxCell id="e_u_ed" style="endArrow=block;html=1;strokeWidth=1.4;strokeColor=#1565C0;" edge="1" parent="1" source="u1" target="ed1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_u_ui" style="endArrow=block;html=1;strokeWidth=1.4;strokeColor=#1565C0;" edge="1" parent="1" source="u1" target="ui1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Edges: Interface to Modules -->
        <mxCell id="e_ed_mod" style="endArrow=block;html=1;strokeWidth=1.4;strokeColor=#5E35B1;" edge="1" parent="1" source="ed1" target="modBox">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_ui_mod" style="endArrow=block;html=1;strokeWidth=1.4;strokeColor=#5E35B1;" edge="1" parent="1" source="ui1" target="modBox">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Edges: Modules to externals -->
        <mxCell id="e_mod_kb" style="endArrow=block;html=1;strokeWidth=1.3;strokeColor=#455A64;" edge="1" parent="1" source="modBox" target="kb1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_mod_cfg" style="endArrow=block;html=1;strokeWidth=1.3;strokeColor=#455A64;" edge="1" parent="1" source="modBox" target="cfg1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_mod_log" style="endArrow=block;html=1;strokeWidth=1.3;strokeColor=#455A64;" edge="1" parent="1" source="modBox" target="log1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Edges: Modules to Semantic (optional dashed) -->
        <mxCell id="e_mod_sem" style="endArrow=block;html=1;strokeWidth=1.3;strokeColor=#EF6C00;dashed=1;dashPattern=6 6;" edge="1" parent="1" source="modBox" target="sem1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
